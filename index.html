<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üìí My Notes</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìí</text></svg>">
<link href="https://fonts.googleapis.com/css2?family=Fraunces:ital,wght@0,300;0,400;0,600;1,300;1,400&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --cream: #f5f0e8;
    --paper: #faf7f2;
    --ink: #1a1612;
    --ink-light: #4a4240;
    --ink-muted: #9a928a;
    --amber: #c8860a;
    --amber-hover: #a8700a;
    --amber-light: #f0c060;
    --amber-pale: #fdf3d8;
    --red: #c0392b;
    --green: #27ae60;
    --border: #ddd5c8;
    --shadow: rgba(26,22,18,0.08);
  }
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--cream);
    color: var(--ink);
    font-family: 'Fraunces', Georgia, serif;
    min-height: 100vh;
    overflow: hidden;
  }

  /* TOAST */
  #toasts {
    position: fixed; top: 1.2rem; right: 1.2rem;
    z-index: 9999; display: flex; flex-direction: column;
    gap: 0.5rem; pointer-events: none;
  }
  .toast {
    display: flex; align-items: center; gap: 0.6rem;
    padding: 0.75rem 1.1rem; border-radius: 10px;
    font-family: 'DM Mono', monospace; font-size: 0.75rem; font-weight: 500;
    box-shadow: 0 6px 24px rgba(0,0,0,0.18);
    animation: toastIn 0.35s cubic-bezier(0.34,1.56,0.64,1) forwards;
    max-width: 320px; pointer-events: auto;
  }
  .toast.success { background:#0f2e1a; color:#4eff8a; border:1px solid #1a5a2a; }
  .toast.error   { background:#2e0f0f; color:#ff7070; border:1px solid #5a1a1a; }
  .toast.info    { background:#0f1a2e; color:#70b5ff; border:1px solid #1a3060; }
  .toast.warning { background:#2e1f0a; color:#ffd060; border:1px solid #5a3a0a; }
  .toast.out { animation: toastOut 0.3s forwards; }
  @keyframes toastIn  { from{opacity:0;transform:translateX(40px) scale(0.95)} to{opacity:1;transform:translateX(0) scale(1)} }
  @keyframes toastOut { from{opacity:1;transform:translateX(0)} to{opacity:0;transform:translateX(40px)} }

  /* HEADER */
  header {
    height: 60px; background: var(--paper);
    border-bottom: 1px solid var(--border);
    display: flex; align-items: center; padding: 0 1.5rem; gap: 1rem;
    position: fixed; top:0; left:0; right:0; z-index:200;
    box-shadow: 0 2px 10px var(--shadow);
  }
  .logo-icon { font-size: 1.4rem; }
  .logo-text { font-size:1.25rem; font-weight:400; font-style:italic; color:var(--ink); }
  .hdr-div { width:1px; height:20px; background:var(--border); }
  #status-wrap { display:flex; align-items:center; gap:0.4rem; font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--ink-muted); }
  .dot { width:7px; height:7px; border-radius:50%; background:var(--ink-muted); transition:all 0.4s; }
  .dot.ok  { background:var(--green); box-shadow:0 0 8px rgba(39,174,96,0.6); }
  .dot.err { background:var(--red); }
  .hdr-space { flex:1; }
  #note-counter { font-family:'DM Mono',monospace; font-size:0.7rem; color:var(--ink-muted); background:var(--cream); border:1px solid var(--border); border-radius:20px; padding:0.2rem 0.7rem; }

  /* BUTTONS */
  .btn { padding:0.5rem 1.1rem; border-radius:8px; border:none; cursor:pointer; font-family:'DM Mono',monospace; font-size:0.75rem; font-weight:500; letter-spacing:0.04em; transition:all 0.15s; display:flex; align-items:center; gap:0.4rem; }
  .btn-primary { background:var(--amber); color:#fff; }
  .btn-primary:hover { background:var(--amber-hover); transform:translateY(-1px); box-shadow:0 4px 14px rgba(200,134,10,0.35); }
  .btn-ghost { background:transparent; color:var(--ink-light); border:1px solid var(--border); }
  .btn-ghost:hover { background:var(--cream); }
  .btn-red { background:transparent; color:var(--red); border:1px solid rgba(192,57,43,0.3); }
  .btn-red:hover { background:rgba(192,57,43,0.08); }
  .btn-sm { padding:0.35rem 0.8rem; font-size:0.7rem; }

  /* LAYOUT */
  .layout { display:grid; grid-template-columns:280px 1fr; height:calc(100vh - 60px); margin-top:60px; }

  /* SIDEBAR */
  .sidebar { background:var(--paper); border-right:1px solid var(--border); display:flex; flex-direction:column; overflow:hidden; }
  .sb-search { padding:0.8rem 1rem; border-bottom:1px solid var(--border); position:relative; }
  .sb-search input { width:100%; padding:0.55rem 0.8rem 0.55rem 2rem; background:var(--cream); border:1px solid var(--border); border-radius:8px; font-family:'DM Mono',monospace; font-size:0.75rem; color:var(--ink); outline:none; transition:border-color 0.2s; }
  .sb-search input:focus { border-color:var(--amber); }
  .sb-search input::placeholder { color:var(--ink-muted); }
  .sb-search .si { position:absolute; left:1.6rem; top:50%; transform:translateY(-50%); font-size:0.8rem; color:var(--ink-muted); }
  .notes-list { flex:1; overflow-y:auto; padding:0.4rem 0; }
  .notes-list::-webkit-scrollbar { width:3px; }
  .notes-list::-webkit-scrollbar-thumb { background:var(--border); border-radius:2px; }
  .note-item { padding:0.85rem 1rem; cursor:pointer; border-left:3px solid transparent; transition:all 0.15s; }
  .note-item:hover { background:var(--cream); border-left-color:var(--border); }
  .note-item.active { background:var(--amber-pale); border-left-color:var(--amber); }
  .ni-title { font-size:0.88rem; font-weight:600; color:var(--ink); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin-bottom:0.25rem; }
  .ni-preview { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--ink-muted); white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin-bottom:0.25rem; }
  .ni-meta { display:flex; align-items:center; gap:0.5rem; }
  .ni-date { font-family:'DM Mono',monospace; font-size:0.62rem; color:var(--ink-muted); opacity:0.7; }
  .ni-cat { font-family:'DM Mono',monospace; font-size:0.6rem; color:var(--amber); background:var(--amber-pale); border-radius:10px; padding:0.05rem 0.4rem; }
  .empty-list { padding:2rem 1rem; text-align:center; color:var(--ink-muted); font-size:0.85rem; font-style:italic; line-height:1.8; }

  /* MAIN */
  .main { display:flex; flex-direction:column; overflow:hidden; background:var(--cream); }
  #loading-bar { height:2px; background:linear-gradient(90deg,var(--amber),var(--amber-light),var(--amber)); background-size:200%; animation:shimmer 1s infinite linear; display:none; }
  #loading-bar.show { display:block; }
  @keyframes shimmer { 0%{background-position:200% 0} 100%{background-position:-200% 0} }

  /* TOOLBAR */
  .toolbar { display:flex; align-items:center; gap:0.6rem; padding:0.7rem 1.5rem; border-bottom:1px solid var(--border); background:var(--paper); flex-shrink:0; }
  .toolbar-space { flex:1; }
  .unsaved-dot { width:7px; height:7px; border-radius:50%; background:var(--amber); display:none; }
  .unsaved-dot.show { display:block; }

  /* EDITOR */
  .editor-wrap { flex:1; display:flex; flex-direction:column; overflow:hidden; }
  #note-title { padding:1.3rem 2rem 0.4rem; font-family:'Fraunces',serif; font-size:1.9rem; font-weight:300; font-style:italic; color:var(--ink); background:transparent; border:none; outline:none; width:100%; border-bottom:1px solid transparent; transition:border-color 0.2s; flex-shrink:0; }
  #note-title:focus { border-bottom-color:var(--amber); }
  #note-title::placeholder { color:var(--ink-muted); }
  .cat-row { display:flex; align-items:center; gap:0.6rem; padding:0.3rem 2rem 0.8rem; flex-shrink:0; }
  .cat-label { font-family:'DM Mono',monospace; font-size:0.68rem; color:var(--ink-muted); text-transform:uppercase; letter-spacing:0.1em; }
  #note-category { font-family:'DM Mono',monospace; font-size:0.72rem; color:var(--amber); background:var(--amber-pale); border:1px solid rgba(200,134,10,0.25); border-radius:20px; padding:0.2rem 0.8rem; outline:none; width:160px; transition:border-color 0.2s; }
  #note-category:focus { border-color:var(--amber); }
  #note-category::placeholder { color:rgba(200,134,10,0.4); }
  #note-body { flex:1; padding:0 2rem 1.5rem; font-family:'Fraunces',serif; font-size:0.98rem; font-weight:300; line-height:1.95; color:var(--ink-light); background:transparent; border:none; outline:none; resize:none; overflow-y:auto; }
  #note-body::-webkit-scrollbar { width:3px; }
  #note-body::-webkit-scrollbar-thumb { background:var(--border); }
  #note-body::placeholder { color:var(--ink-muted); font-style:italic; }

  /* META BAR */
  .meta-bar { padding:0.5rem 2rem; border-top:1px solid var(--border); background:var(--paper); display:flex; align-items:center; gap:1.5rem; font-family:'DM Mono',monospace; font-size:0.65rem; color:var(--ink-muted); flex-shrink:0; }

  /* EMPTY STATE */
  .empty-state { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; gap:1rem; color:var(--ink-muted); padding:3rem; text-align:center; }
  .empty-state .es-icon { font-size:4rem; opacity:0.25; }
  .empty-state h2 { font-size:1.3rem; font-weight:300; font-style:italic; }
  .empty-state p { font-family:'DM Mono',monospace; font-size:0.72rem; line-height:1.9; max-width:280px; }

  /* EDITOR PANEL */
  #editor-panel { display:none; flex:1; flex-direction:column; overflow:hidden; }
  #editor-panel.show { display:flex; }

  /* DELETE MODAL */
  .modal-bg { position:fixed; inset:0; background:rgba(26,22,18,0.55); backdrop-filter:blur(4px); z-index:500; display:flex; align-items:center; justify-content:center; opacity:0; pointer-events:none; transition:opacity 0.2s; }
  .modal-bg.show { opacity:1; pointer-events:auto; }
  .modal { background:var(--paper); border:1px solid var(--border); border-radius:14px; padding:2rem; max-width:380px; width:90%; box-shadow:0 20px 60px rgba(26,22,18,0.25); transform:scale(0.95); transition:transform 0.2s; }
  .modal-bg.show .modal { transform:scale(1); }
  .modal h3 { font-size:1.1rem; font-weight:400; font-style:italic; margin-bottom:0.6rem; }
  .modal p { font-family:'DM Mono',monospace; font-size:0.75rem; color:var(--ink-muted); line-height:1.7; margin-bottom:1.5rem; }
  .modal-actions { display:flex; gap:0.8rem; justify-content:flex-end; }
</style>
</head>
<body>

<div id="toasts"></div>

<!-- DELETE MODAL -->
<div class="modal-bg" id="del-modal">
  <div class="modal">
    <h3>Delete this note?</h3>
    <p>This action is permanent and cannot be undone. The note will be removed from your Firestore database.</p>
    <div class="modal-actions">
      <button class="btn btn-ghost btn-sm" id="cancel-del">Cancel</button>
      <button class="btn btn-red btn-sm" id="confirm-del">üóë Delete</button>
    </div>
  </div>
</div>

<!-- HEADER -->
<header>
  <span class="logo-icon">üìí</span>
  <span class="logo-text">My Notes</span>
  <div class="hdr-div"></div>
  <div id="status-wrap">
    <div class="dot" id="conn-dot"></div>
    <span id="conn-label">Connecting‚Ä¶</span>
  </div>
  <div class="hdr-space"></div>
  <span id="note-counter">0 notes</span>
  <button class="btn btn-primary" id="new-note-btn">Ôºã New Note</button>
</header>

<!-- LAYOUT -->
<div class="layout">
  <div class="sidebar">
    <div class="sb-search">
      <span class="si">üîç</span>
      <input type="text" id="search-input" placeholder="Search notes‚Ä¶">
    </div>
    <div class="notes-list" id="notes-list">
      <div class="empty-list">Loading‚Ä¶</div>
    </div>
  </div>

  <div class="main">
    <div id="loading-bar"></div>

    <!-- Empty state -->
    <div class="empty-state" id="empty-state">
      <div class="es-icon">üìí</div>
      <h2>No note selected</h2>
      <p>Pick a note from the sidebar or create a new one to get started.</p>
      <button class="btn btn-primary" id="new-note-btn2">Ôºã New Note</button>
    </div>

    <!-- Editor -->
    <div id="editor-panel">
      <div class="toolbar">
        <button class="btn btn-ghost btn-sm" id="back-btn">‚Üê Back</button>
        <div class="unsaved-dot" id="unsaved-dot"></div>
        <span id="toolbar-label" style="font-family:'DM Mono',monospace;font-size:0.7rem;color:var(--ink-muted);"></span>
        <div class="toolbar-space"></div>
        <button class="btn btn-ghost btn-sm" id="save-btn">üíæ Save</button>
        <button class="btn btn-red btn-sm" id="delete-btn">üóë Delete</button>
      </div>
      <div class="editor-wrap">
        <input type="text" id="note-title" placeholder="Note title‚Ä¶">
        <div class="cat-row">
          <span class="cat-label">Tag</span>
          <input type="text" id="note-category" placeholder="e.g. work, ideas‚Ä¶">
        </div>
        <textarea id="note-body" placeholder="Start writing your note here‚Ä¶"></textarea>
      </div>
      <div class="meta-bar">
        <span id="meta-created">Created ‚Äî</span>
        <span id="meta-updated">Updated ‚Äî</span>
        <span id="meta-words">0 words</span>
      </div>
    </div>
  </div>
</div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
import {
  getFirestore, collection, addDoc, doc,
  updateDoc, deleteDoc, onSnapshot, serverTimestamp, query, orderBy
} from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyC7HlN4eGuvVD2Zdrw0JfeVvu2j-0qgwS4",
  authDomain: "notes-829ef.firebaseapp.com",
  projectId: "notes-829ef",
  storageBucket: "notes-829ef.firebasestorage.app",
  messagingSenderId: "415144945367",
  appId: "1:415144945367:web:6003617d848fc37e0cb292",
  measurementId: "G-FXP2YCC9NS"
};

const app = initializeApp(firebaseConfig);
const db  = getFirestore(app);
const COLL = "notes";

let allNotes = [];
let currentId = null;
let isDirty = false;
let deleteTarget = null;

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
function toast(msg, type = 'info') {
  const wrap = document.getElementById('toasts');
  const t = document.createElement('div');
  t.className = `toast ${type}`;
  const icons = { success:'‚úÖ', error:'‚ùå', info:'‚ÑπÔ∏è', warning:'‚ö†Ô∏è' };
  t.innerHTML = `<span>${icons[type]||'üìå'}</span><span>${msg}</span>`;
  wrap.appendChild(t);
  setTimeout(() => {
    t.classList.add('out');
    setTimeout(() => t.remove(), 350);
  }, 3500);
}

function setLoading(v) {
  document.getElementById('loading-bar').classList.toggle('show', v);
}

function setStatus(ok, label) {
  document.getElementById('conn-dot').className = 'dot ' + (ok ? 'ok' : 'err');
  document.getElementById('conn-label').textContent = label;
}

function esc(s) {
  return String(s||'').replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function fmtDate(d) {
  if (!d) return '‚Äî';
  return d.toLocaleDateString('en-US',{month:'short',day:'numeric',year:'numeric',hour:'2-digit',minute:'2-digit'});
}

// ‚îÄ‚îÄ REAL-TIME LISTENER ‚îÄ‚îÄ
const q = query(collection(db, COLL), orderBy('updatedAt','desc'));
onSnapshot(q,
  snap => {
    setStatus(true, 'Connected');
    allNotes = snap.docs.map(d => ({ id: d.id, ...d.data() }));
    document.getElementById('note-counter').textContent = allNotes.length + (allNotes.length===1?' note':' notes');
    renderList();
    if (currentId && !allNotes.find(n => n.id === currentId)) {
      deselectNote();
      toast('Note was deleted externally.','warning');
    }
  },
  err => {
    setStatus(false, 'Offline');
    toast('Firestore error: ' + err.message,'error');
  }
);

// ‚îÄ‚îÄ RENDER LIST ‚îÄ‚îÄ
function renderList() {
  const q = document.getElementById('search-input').value.toLowerCase();
  const ul = document.getElementById('notes-list');
  let list = allNotes;
  if (q) list = allNotes.filter(n =>
    (n.title||'').toLowerCase().includes(q) ||
    (n.body||'').toLowerCase().includes(q) ||
    (n.category||'').toLowerCase().includes(q)
  );
  if (!list.length) {
    ul.innerHTML = `<div class="empty-list">${q?'No results found.':'No notes yet.<br>Create your first one!'}</div>`;
    return;
  }
  ul.innerHTML = list.map(n => {
    const active = n.id===currentId?' active':'';
    const date = n.updatedAt ? fmtDate(n.updatedAt.toDate()) : '‚Äî';
    const preview = (n.body||'').replace(/\n/g,' ').slice(0,65)||'No content';
    const catBadge = n.category ? `<span class="ni-cat">${esc(n.category)}</span>` : '';
    return `<div class="note-item${active}" data-id="${n.id}">
      <div class="ni-title">${esc(n.title||'Untitled')}</div>
      <div class="ni-preview">${esc(preview)}</div>
      <div class="ni-meta">${catBadge}<span class="ni-date">${date}</span></div>
    </div>`;
  }).join('');

  ul.querySelectorAll('.note-item').forEach(el => {
    el.addEventListener('click', () => openNote(el.dataset.id));
  });
}

// ‚îÄ‚îÄ OPEN NOTE ‚îÄ‚îÄ
function openNote(id) {
  if (isDirty && currentId) {
    if (!confirm('Unsaved changes ‚Äî discard them?')) return;
  }
  currentId = id;
  isDirty = false;
  const n = allNotes.find(x => x.id === id);
  if (!n) return;
  showEditor();
  document.getElementById('note-title').value    = n.title    || '';
  document.getElementById('note-category').value = n.category || '';
  document.getElementById('note-body').value     = n.body     || '';
  document.getElementById('unsaved-dot').classList.remove('show');
  document.getElementById('toolbar-label').textContent = n.title || 'Untitled';
  document.getElementById('meta-created').textContent = 'Created ' + (n.createdAt ? fmtDate(n.createdAt.toDate()) : '‚Äî');
  document.getElementById('meta-updated').textContent = 'Updated ' + (n.updatedAt ? fmtDate(n.updatedAt.toDate()) : '‚Äî');
  updateWords();
  renderList();
}

// ‚îÄ‚îÄ NEW NOTE ‚îÄ‚îÄ
async function newNote() {
  if (isDirty && currentId) {
    if (!confirm('Unsaved changes ‚Äî discard them?')) return;
  }
  setLoading(true);
  try {
    const ref = await addDoc(collection(db, COLL), {
      title:'', body:'', category:'',
      createdAt: serverTimestamp(),
      updatedAt: serverTimestamp()
    });
    currentId = ref.id;
    isDirty = false;
    showEditor();
    document.getElementById('note-title').value    = '';
    document.getElementById('note-category').value = '';
    document.getElementById('note-body').value     = '';
    document.getElementById('note-title').focus();
    document.getElementById('unsaved-dot').classList.remove('show');
    document.getElementById('toolbar-label').textContent = 'New note';
    document.getElementById('meta-created').textContent = 'Created just now';
    document.getElementById('meta-updated').textContent = 'Updated just now';
    updateWords();
    toast('New note created! üìù','success');
  } catch(e) { toast('Error: ' + e.message,'error'); }
  setLoading(false);
}

// ‚îÄ‚îÄ SAVE NOTE ‚îÄ‚îÄ
async function saveNote() {
  if (!currentId) return;
  const title    = document.getElementById('note-title').value.trim();
  const body     = document.getElementById('note-body').value;
  const category = document.getElementById('note-category').value.trim();
  setLoading(true);
  try {
    await updateDoc(doc(db, COLL, currentId), { title, body, category, updatedAt: serverTimestamp() });
    isDirty = false;
    document.getElementById('unsaved-dot').classList.remove('show');
    document.getElementById('toolbar-label').textContent = title || 'Untitled';
    document.getElementById('meta-updated').textContent = 'Updated just now';
    toast('Note saved! ‚úÖ','success');
  } catch(e) { toast('Error saving: ' + e.message,'error'); }
  setLoading(false);
}

// ‚îÄ‚îÄ DELETE ‚îÄ‚îÄ
function openDelModal() {
  if (!currentId) return;
  deleteTarget = currentId; // capture the ID to delete
  document.getElementById('del-modal').classList.add('show');
}

function closeModal() {
  document.getElementById('del-modal').classList.remove('show');
  deleteTarget = null;
}

async function confirmDelete() {
  if (!deleteTarget) return;

  // FIX: Save the target ID locally BEFORE closing the modal or nulling deleteTarget
  const idToDelete = deleteTarget;

  // Close modal first (UI feedback)
  document.getElementById('del-modal').classList.remove('show');
  deleteTarget = null;

  setLoading(true);
  try {
    await deleteDoc(doc(db, COLL, idToDelete));

    // FIX: Compare against the saved local variable, not the already-nulled deleteTarget
    if (currentId === idToDelete) {
      currentId = null;
      isDirty = false;
      document.getElementById('editor-panel').classList.remove('show');
      document.getElementById('empty-state').style.display = 'flex';
    }

    toast('Note deleted üóë','warning');
  } catch(e) {
    toast('Error deleting: ' + e.message, 'error');
  }
  setLoading(false);
}

// ‚îÄ‚îÄ DESELECT ‚îÄ‚îÄ
function deselectNote() {
  currentId = null;
  isDirty = false;
  document.getElementById('editor-panel').classList.remove('show');
  document.getElementById('empty-state').style.display = 'flex';
  renderList();
}

// ‚îÄ‚îÄ DIRTY ‚îÄ‚îÄ
function markDirty() {
  isDirty = true;
  document.getElementById('unsaved-dot').classList.add('show');
  updateWords();
}

function updateWords() {
  const body = document.getElementById('note-body').value;
  const w = body.trim() ? body.trim().split(/\s+/).length : 0;
  document.getElementById('meta-words').textContent = w + ' word' + (w!==1?'s':'');
}

function showEditor() {
  document.getElementById('empty-state').style.display = 'none';
  document.getElementById('editor-panel').classList.add('show');
}

// ‚îÄ‚îÄ EVENTS ‚îÄ‚îÄ
document.getElementById('new-note-btn').addEventListener('click', newNote);
document.getElementById('new-note-btn2').addEventListener('click', newNote);
document.getElementById('back-btn').addEventListener('click', () => {
  if (isDirty && !confirm('Unsaved changes ‚Äî discard?')) return;
  deselectNote();
});
document.getElementById('save-btn').addEventListener('click', saveNote);
document.getElementById('delete-btn').addEventListener('click', openDelModal);
document.getElementById('cancel-del').addEventListener('click', closeModal);
document.getElementById('confirm-del').addEventListener('click', confirmDelete);
document.getElementById('search-input').addEventListener('input', renderList);
document.getElementById('note-title').addEventListener('input', markDirty);
document.getElementById('note-category').addEventListener('input', markDirty);
document.getElementById('note-body').addEventListener('input', markDirty);

// Ctrl+S / Cmd+S
document.addEventListener('keydown', e => {
  if ((e.ctrlKey||e.metaKey) && e.key==='s') { e.preventDefault(); saveNote(); }
});
</script>
</body>
</html>
